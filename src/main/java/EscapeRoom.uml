@startuml
left to right direction

' ======== Entities / Beans ========
class EscapeRoom {
    -id: int
    -name: String
    -roomIds: List<Integer>
}

class Room {
    -id: int
    -name: String
    -difficulty: String
    -clueIds: List<Integer>
    -decorationIds: List<Integer>
}

class Clue {
    -id: int
    -name: String
    -price: double
    -theme: String
    -reward: String
}

class Decoration {
    -id: int
    -name: String
    -price: double
    -material: String
    -quantity: int
}

class Player {
    -id: int
    -name: String
}

class Certificate {
    -id: int
    -playerId: int
    -roomId: int
    -achievement: String
}

class Ticket {
    -id: int
    -playerId: int
    -price: double
    -purchaseTime: LocalDateTime
}


' ======== DAO Interfaces ========
interface EscapeRoomDAO
interface RoomDAO
interface ClueDAO
interface DecorationDAO
interface PlayerDAO
interface CertificateDAO
interface TicketDAO

' ======== DAO Implementations ========
class EscapeRoomDAOImpl
class RoomDAOImpl
class ClueDAOImpl
class DecorationDAOImpl
class PlayerDAOImpl
class CertificateDAOImpl
class TicketDAOImpl

EscapeRoomDAO <|.. EscapeRoomDAOImpl
RoomDAO <|.. RoomDAOImpl
ClueDAO <|.. ClueDAOImpl
DecorationDAO <|.. DecorationDAOImpl
PlayerDAO <|.. PlayerDAOImpl
CertificateDAO <|.. CertificateDAOImpl
TicketDAO <|.. TicketDAOImpl


' ======== Inventario 接口 ========
interface Inventario {
    + getTotalValue(): double
    + getInventoryList(): List<String>
}

class InventarioService

' ======== Services (依赖 DAO 接口) ========
class EscapeRoomService
class RoomService
class ClueService
class DecorationService
class PlayerService
class CertificateService
class TicketService
class NotificationService

EscapeRoomService --> EscapeRoomDAO
RoomService --> RoomDAO
ClueService --> ClueDAO
DecorationService --> DecorationDAO
PlayerService --> PlayerDAO
CertificateService --> CertificateDAO
TicketService --> TicketDAO

InventarioService --> Inventario
InventarioService --> RoomService
InventarioService --> ClueService
InventarioService --> DecorationService


' ======== Menu & Controller ========
class Menu {
    + showMainMenu(): void
}

class EscapeRoomController {
    + run(): void
}

Menu --> EscapeRoomService
Menu --> RoomService
Menu --> ClueService
Menu --> DecorationService
Menu --> PlayerService
Menu --> CertificateService
Menu --> TicketService
Menu --> NotificationService
Menu --> InventarioService

EscapeRoomController --> Menu


' ======== Relationships ========
EscapeRoom o-- Room : contains >
Room o-- Clue : contains >
Room o-- Decoration : contains >
Player "1" -- "0..*" Ticket
Player "1" -- "0..*" Certificate

@enduml